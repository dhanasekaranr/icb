!function(){function n(n,l){for(var t=0;t<l.length;t++){var e=l[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function l(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{px7n:function(t,e,u){"use strict";u.r(e),u.d(e,"CataloguePageModuleNgFactory",(function(){return V}));var i=u("8Y7J"),o=function n(){l(this,n)},r=u("pMnS"),a=u("SVse"),c=u("MKJQ"),s=u("sZkV"),b=u("Uynf"),p=u("2GTJ"),h=u("3X0i"),f=u("occH"),d=u("s7LF"),m=u("ngBU"),g=u("IheW"),x=u("xgBC"),v=u("pjJ7"),y=u("BimW"),C=u("mrSG"),k=function(){function t(n,e,u,i,o,r,a,c){l(this,t),this.navCtrl=n,this.service=e,this.platform=u,this.authentication=i,this.loading=o,this.toastCtrl=r,this.ms=a,this.actionSheetCtrl=c,this.queryval="",this.DescriptionSearch=""}var e,u,i;return e=t,(u=[{key:"ionViewWillEnter",value:function(){return Object(C.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var l=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null==this.authentication.getAccessToken()){n.next=8;break}return n.next=3,this.loading.create({message:"Getting books..."});case 3:this.loader=n.sent,this.searchBookDB(null),this.service.getRelationShips().then((function(n){return Object(C.a)(l,void 0,void 0,regeneratorRuntime.mark((function l(){return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:this.userlist=n;case 1:case"end":return l.stop()}}),l,this)})))})),n.next=9;break;case 8:this.navCtrl.navigateForward("tabs/login");case 9:case"end":return n.stop()}}),n,this)})))}},{key:"searchBookDB",value:function(n){var l=this;n&&void 0!==n.target.value&&(this.queryval=n.target.value),(this.queryval.length>1||""===this.queryval)&&this.loader.present().then((function(){l.service.searchTrans("book",l.queryval).then((function(n){console.log(n),l.books=n,l.RentedOut=l.books.reduce((function(n,l){return n+parseInt(l.RentedCopies,10)}),0),l.AvailableCount=l.books.reduce((function(n,l){return n+parseInt(l.TotalCopies,10)}),0),l.loader.dismiss()})).catch((function(n){console.log(n)}))}))}},{key:"getIdCheval",value:function(){this.AvailableCount=this.books.reduce((function(n,l){return n+parseInt(l.Course.allocation,10)}),0)}},{key:"FilterBookDB",value:function(n){this.DescriptionSearch=n.target.value}},{key:"bookInfo",value:function(n){this.ms.setDestn(n),this.navCtrl.navigateForward("tabs/bookInfo")}},{key:"AddToWishList",value:function(n,l,t){var e=this;this.service.AddToWishList(n.ISBN).then((function(u){return Object(C.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastCtrl.create({message:t,duration:1e3});case 2:e.sent.present(),n.WishList=l;case 4:case"end":return e.stop()}}),e,this)})))}))}},{key:"AddToHold",value:function(n){return Object(C.a)(this,void 0,void 0,regeneratorRuntime.mark((function l(){var t,e,u=this;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return e=[],this.userlist.forEach((function(l){return Object(C.a)(u,void 0,void 0,regeneratorRuntime.mark((function u(){var i=this;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:e.push({text:l.FirstName+" "+l.LastName,handler:function(){return i.service.AddToHold(n.ISBN,n.ProposedCode,l.UserId,n.CreatedBy).then((function(l){return Object(C.a)(i,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.toastCtrl.create({message:"Placed hold request",duration:1e3});case 2:t.sent.present(),l&&(n.Hold="Y");case 4:case"end":return t.stop()}}),t,this)})))})),t.dismiss(),!1}});case 1:case"end":return u.stop()}}),u)})))})),e.push({text:"Cancel",icon:"close",role:"destructive",handler:function(){return t.dismiss(),!1}}),l.next=5,this.actionSheetCtrl.create({header:"Pick a Name ",buttons:e});case 5:(t=l.sent).present();case 7:case"end":return l.stop()}}),l,this)})))}},{key:"returnBook",value:function(n){var l=this;n.TotalCopies>1?(this.ms.setDestn(n),this.navCtrl.navigateForward("tabs/multipleReturnPage")):this.service.markReturn(n.RentedTransId).then((function(n){return Object(C.a)(l,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.toastCtrl.create({message:"Returned successfully !",duration:2e3});case 2:n.sent.present(),this.searchBookDB(null);case 4:case"end":return n.stop()}}),n,this)})))}))}},{key:"checkout",value:function(n){this.ms.setDestn(n),this.ms.setAction("Out"),n.TotalCopies>1?this.navCtrl.navigateForward("tabs/multiCopiesPage"):(this.ms.setHome("C"),this.navCtrl.navigateForward("tabs/checkoutPage"))}},{key:"openMenu",value:function(n,l){var t=this;this.service.getBookProfile(l.ISBN).then((function(n){return Object(C.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.Available=n,this.RentedOut=this.Available.filter((function(n){return"3"===n.Status})).length,this.AvailableCount=this.Available.filter((function(n){return"3"!==n.Status})).length,t.next=5,this.actionSheetCtrl.create({header:"Click the link below.",cssClass:"action-sheets-basic-page",buttons:[{text:"Book Info [Count: "+this.Available.length+"]",role:"destructive",icon:this.platform.is("ios")?null:"list",handler:function(){e.navCtrl.navigateForward("CheckOutPage",{queryParams:{book:l}})}},{text:"Cancel",role:"cancel",icon:this.platform.is("ios")?null:"close",handler:function(){}}]});case 5:t.sent.present();case 6:case"end":return t.stop()}}),t,this)})))}))}},{key:"itemTapped",value:function(n,l){this.navCtrl.navigateForward("BookInfo",{queryParams:{book:l}})}}])&&n(e.prototype,u),i&&n(e,i),t}(),R=u("dqLM"),w=i.wb({encapsulation:0,styles:[[".icon-circle[_ngcontent-%COMP%], .icon-circle-large[_ngcontent-%COMP%], .icon-circle-small[_ngcontent-%COMP%]{position:relative;display:inline-block;margin:-1px;width:45px;height:45px;font-size:40px;border-radius:10%;text-align:center}.icon-circle-large[_ngcontent-%COMP%]{width:100px;height:100px;font-size:64px;padding:16px}.icon-circle-small[_ngcontent-%COMP%]{width:24px;height:24px;font-size:20px}.icon-circle-outline[_ngcontent-%COMP%]{border:1px solid #00a1e1;background:transparent;color:#00a1e1}.item-icon-circle[_ngcontent-%COMP%]{border-radius:50%;width:100px;height:100px;text-align:center;color:#fff}.item-icon-circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:60px}.bg-circle-alt[_ngcontent-%COMP%]{border-radius:50%;width:100px;height:100px}"]],data:{}});function B(n){return i.Xb(0,[(n()(),i.yb(0,0,null,null,1,"span",[["style","color: green; font-size: .8em;align-content: right"]],null,null,null,null,null)),(n()(),i.Ub(1,null,[" Total Books:","(","); Rented Out:",""]))],null,(function(n,l){var t=l.component;n(l,1,0,t.AvailableCount,t.books.length,t.RentedOut)}))}function I(n){return i.Xb(0,[(n()(),i.yb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),i.Ub(1,null,["[Checked Out : ","]"]))],null,(function(n,l){n(l,1,0,l.parent.parent.context.$implicit.RentedCopies)}))}function O(n){return i.Xb(0,[(n()(),i.yb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),i.Ub(1,null,["[On Hold : ","]"]))],null,(function(n,l){n(l,1,0,l.parent.parent.context.$implicit.HoldedCopies)}))}function $(n){return i.Xb(0,[(n()(),i.yb(0,0,null,null,5,"p",[["class","item-description"]],null,null,null,null,null)),(n()(),i.Ub(1,null,[" Available : "," "])),(n()(),i.hb(16777216,null,null,1,null,I)),i.xb(3,16384,null,0,a.m,[i.R,i.O],{ngIf:[0,"ngIf"]},null),(n()(),i.hb(16777216,null,null,1,null,O)),i.xb(5,16384,null,0,a.m,[i.R,i.O],{ngIf:[0,"ngIf"]},null)],(function(n,l){n(l,3,0,l.parent.context.$implicit.RentedCopies>0),n(l,5,0,l.parent.context.$implicit.HoldedCopies>0)}),(function(n,l){n(l,1,0,l.parent.context.$implicit.TotalCopies-l.parent.context.$implicit.RentedCopies-l.parent.context.$implicit.HoldedCopies)}))}function P(n){return i.Xb(0,[(n()(),i.yb(0,0,null,null,1,"p",[["style","color:green;"]],null,null,null,null,null)),(n()(),i.Ub(1,null,[""," "]))],null,(function(n,l){n(l,1,0,l.parent.context.$implicit.Code)}))}function A(n){return i.Xb(0,[(n()(),i.yb(0,0,null,null,5,"span",[["class","ion-text-wrap"],["style","text-align:center;"]],null,null,null,null,null)),(n()(),i.yb(1,0,null,null,2,"p",[],null,null,null,null,null)),(n()(),i.yb(2,0,null,null,1,"ion-icon",[["class","icon-circle"],["name","archive-outline"],["style","color:blue;"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.AddToHold(n.parent.parent.context.$implicit)&&e),e}),c.V,c.n)),i.xb(3,49152,null,0,s.B,[i.h,i.l,i.B],{name:[0,"name"]},null),(n()(),i.yb(4,0,null,null,1,"p",[["style","margin-top: 0px;color:blue;"]],null,null,null,null,null)),(n()(),i.Ub(-1,null,["Request Hold"]))],(function(n,l){n(l,3,0,"archive-outline")}),null)}function T(n){return i.Xb(0,[(n()(),i.yb(0,0,null,null,5,"span",[["class","ion-text-wrap"]],null,null,null,null,null)),(n()(),i.yb(1,0,null,null,2,"p",[],null,null,null,null,null)),(n()(),i.yb(2,0,null,null,1,"ion-icon",[["class","icon-circle"],["name","refresh-circle-outline"],["style","color:green;"]],null,null,null,c.V,c.n)),i.xb(3,49152,null,0,s.B,[i.h,i.l,i.B],{name:[0,"name"]},null),(n()(),i.yb(4,0,null,null,1,"p",[["style","color:green;margin-top: 0px;"]],null,null,null,null,null)),(n()(),i.Ub(-1,null,["On Hold"]))],(function(n,l){n(l,3,0,"refresh-circle-outline")}),null)}function H(n){return i.Xb(0,[(n()(),i.yb(0,0,null,null,5,"span",[["class","ion-text-wrap"]],null,null,null,null,null)),(n()(),i.yb(1,0,null,null,2,"p",[],null,null,null,null,null)),(n()(),i.yb(2,0,null,null,1,"ion-icon",[["class","icon-circle"],["name","thumbs-up-outline"],["style","color:green;"]],null,null,null,c.V,c.n)),i.xb(3,49152,null,0,s.B,[i.h,i.l,i.B],{name:[0,"name"]},null),(n()(),i.yb(4,0,null,null,1,"p",[["style","color:green;margin-top: 0px;"]],null,null,null,null,null)),(n()(),i.Ub(-1,null,["Ready for pickup"]))],(function(n,l){n(l,3,0,"thumbs-up-outline")}),null)}function K(n){return i.Xb(0,[(n()(),i.yb(0,0,null,null,5,"span",[["class","ion-text-wrap"]],null,null,null,null,null)),(n()(),i.yb(1,0,null,null,2,"p",[],null,null,null,null,null)),(n()(),i.yb(2,0,null,null,1,"ion-icon",[["class","icon-circle"],["name","thumbs-down-outline"],["style","color:red;"]],null,null,null,c.V,c.n)),i.xb(3,49152,null,0,s.B,[i.h,i.l,i.B],{name:[0,"name"]},null),(n()(),i.yb(4,0,null,null,1,"p",[["style","color:red;margin-top: 0px;"]],null,null,null,null,null)),(n()(),i.Ub(-1,null,["Denied"]))],(function(n,l){n(l,3,0,"thumbs-down-outline")}),null)}function M(n){return i.Xb(0,[(n()(),i.yb(0,0,null,null,8,"span",[],null,null,null,null,null)),(n()(),i.hb(16777216,null,null,1,null,A)),i.xb(2,16384,null,0,a.m,[i.R,i.O],{ngIf:[0,"ngIf"]},null),(n()(),i.hb(16777216,null,null,1,null,T)),i.xb(4,16384,null,0,a.m,[i.R,i.O],{ngIf:[0,"ngIf"]},null),(n()(),i.hb(16777216,null,null,1,null,H)),i.xb(6,16384,null,0,a.m,[i.R,i.O],{ngIf:[0,"ngIf"]},null),(n()(),i.hb(16777216,null,null,1,null,K)),i.xb(8,16384,null,0,a.m,[i.R,i.O],{ngIf:[0,"ngIf"]},null)],(function(n,l){n(l,2,0,l.parent.context.$implicit.TotalCopies-l.parent.context.$implicit.RentedCopies-l.parent.context.$implicit.HoldedCopies>0&&"Y"!=l.parent.context.$implicit.Hold&&"Y"!=l.parent.context.$implicit.HoldReady&&"Y"!=l.parent.context.$implicit.HoldRejected),n(l,4,0,"Y"===l.parent.context.$implicit.Hold),n(l,6,0,"Y"===l.parent.context.$implicit.HoldReady),n(l,8,0,"Y"===l.parent.context.$implicit.HoldRejected)}),null)}function X(n){return i.Xb(0,[(n()(),i.yb(0,0,null,null,3,"button",[["color","danger"],["ion-button",""],["style","background-color: red;color:white"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.returnBook(n.parent.parent.context.$implicit)&&e),e}),null,null)),(n()(),i.yb(1,0,null,null,1,"ion-icon",[["name","refresh"]],null,null,null,c.V,c.n)),i.xb(2,49152,null,0,s.B,[i.h,i.l,i.B],{name:[0,"name"]},null),(n()(),i.Ub(3,null,[" Return (",") "]))],(function(n,l){n(l,2,0,"refresh")}),(function(n,l){n(l,3,0,l.parent.parent.context.$implicit.RentedCopies)}))}function j(n){return i.Xb(0,[(n()(),i.yb(0,0,null,null,3,"button",[["color","primary"],["ion-button",""],["style","background-color: green; color:white"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.checkout(n.parent.parent.context.$implicit)&&e),e}),null,null)),(n()(),i.yb(1,0,null,null,1,"ion-icon",[["name","cart"]],null,null,null,c.V,c.n)),i.xb(2,49152,null,0,s.B,[i.h,i.l,i.B],{name:[0,"name"]},null),(n()(),i.Ub(3,null,[" Check out (",") "]))],(function(n,l){n(l,2,0,"cart")}),(function(n,l){n(l,3,0,l.parent.parent.context.$implicit.TotalCopies-l.parent.parent.context.$implicit.RentedCopies)}))}function D(n){return i.Xb(0,[(n()(),i.yb(0,0,null,null,5,"ion-item-options",[["side","end"]],null,null,null,c.X,c.q)),i.xb(1,49152,null,0,s.K,[i.h,i.l,i.B],{side:[0,"side"]},null),(n()(),i.hb(16777216,null,0,1,null,X)),i.xb(3,16384,null,0,a.m,[i.R,i.O],{ngIf:[0,"ngIf"]},null),(n()(),i.hb(16777216,null,0,1,null,j)),i.xb(5,16384,null,0,a.m,[i.R,i.O],{ngIf:[0,"ngIf"]},null)],(function(n,l){n(l,1,0,"end"),n(l,3,0,l.parent.context.$implicit.RentedCopies>0),n(l,5,0,l.parent.context.$implicit.TotalCopies-l.parent.context.$implicit.RentedCopies>0)}),null)}function F(n){return i.Xb(0,[(n()(),i.yb(0,0,null,null,18,"ion-item-sliding",[],null,null,null,c.Y,c.r)),i.xb(1,49152,null,0,s.L,[i.h,i.l,i.B],null,null),(n()(),i.yb(2,0,null,0,14,"ion-item",[],null,null,null,c.Z,c.p)),i.xb(3,49152,null,0,s.G,[i.h,i.l,i.B],null,null),(n()(),i.yb(4,0,null,0,2,"ion-avatar",[["slot","start"],["thumbnail",""]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.bookInfo(n.context.$implicit)&&e),e}),c.J,c.b)),i.xb(5,49152,null,0,s.f,[i.h,i.l,i.B],null,null),(n()(),i.yb(6,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),i.yb(7,0,null,0,7,"ion-label",[["class","ion-text-wrap"]],null,null,null,c.ab,c.s)),i.xb(8,49152,null,0,s.M,[i.h,i.l,i.B],null,null),(n()(),i.yb(9,0,null,0,1,"h2",[],null,null,null,null,null)),(n()(),i.Ub(10,null,["",""])),(n()(),i.hb(16777216,null,0,1,null,$)),i.xb(12,16384,null,0,a.m,[i.R,i.O],{ngIf:[0,"ngIf"]},null),(n()(),i.hb(16777216,null,0,1,null,P)),i.xb(14,16384,null,0,a.m,[i.R,i.O],{ngIf:[0,"ngIf"]},null),(n()(),i.hb(16777216,null,0,1,null,M)),i.xb(16,16384,null,0,a.m,[i.R,i.O],{ngIf:[0,"ngIf"]},null),(n()(),i.hb(16777216,null,0,1,null,D)),i.xb(18,16384,null,0,a.m,[i.R,i.O],{ngIf:[0,"ngIf"]},null)],(function(n,l){var t=l.component;n(l,12,0,l.context.$implicit.TotalCopies>0),n(l,14,0,1==l.context.$implicit.TotalCopies),n(l,16,0,"Y"!=t.authentication.getIsAdmin()),n(l,18,0,"Y"===t.authentication.getIsAdmin())}),(function(n,l){n(l,6,0,i.Fb(1,"",l.context.$implicit.PictureLink,"")),n(l,10,0,l.context.$implicit.Description)}))}function S(n){return i.Xb(0,[i.Nb(0,b.a,[]),(n()(),i.yb(1,0,null,null,1,"app-header",[],null,null,null,p.b,p.a)),i.xb(2,49152,null,0,h.a,[s.Eb,f.a,a.i],{title:[0,"title"]},null),(n()(),i.yb(3,0,null,null,14,"ion-content",[["class","home"],["padding",""]],null,null,null,c.R,c.j)),i.xb(4,49152,null,0,s.t,[i.h,i.l,i.B],null,null),(n()(),i.hb(16777216,null,0,1,null,B)),i.xb(6,16384,null,0,a.m,[i.R,i.O],{ngIf:[0,"ngIf"]},null),(n()(),i.yb(7,0,null,0,5,"ion-item",[],null,null,null,c.Z,c.p)),i.xb(8,49152,null,0,s.G,[i.h,i.l,i.B],null,null),(n()(),i.yb(9,0,null,0,3,"ion-searchbar",[],null,[[null,"ionInput"],[null,"ionCancel"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,t){var e=!0,u=n.component;return"ionBlur"===l&&(e=!1!==i.Mb(n,12)._handleBlurEvent(t.target)&&e),"ionChange"===l&&(e=!1!==i.Mb(n,12)._handleInputEvent(t.target)&&e),"ionInput"===l&&(e=!1!==u.FilterBookDB(t)&&e),"ionCancel"===l&&(e=!1!==u.searchBookDB(t)&&e),e}),c.ib,c.A)),i.Pb(5120,null,d.i,(function(n){return[n]}),[s.Kb]),i.xb(11,49152,null,0,s.gb,[i.h,i.l,i.B],{showCancelButton:[0,"showCancelButton"]},null),i.xb(12,4341760,null,0,s.Kb,[i.t,i.l],null,null),(n()(),i.yb(13,0,null,0,4,"ion-list",[],null,null,null,c.cb,c.t)),i.xb(14,49152,null,0,s.N,[i.h,i.l,i.B],null,null),(n()(),i.hb(16777216,null,0,2,null,F)),i.xb(16,278528,null,0,a.l,[i.R,i.O,i.u],{ngForOf:[0,"ngForOf"]},null),i.Ob(17,3)],(function(n,l){var t=l.component;n(l,2,0,"Catalogue"),n(l,6,0,t.AvailableCount),n(l,11,0,!0);var e=i.Vb(l,16,0,n(l,17,0,i.Mb(l,0),t.books,t.DescriptionSearch,null));n(l,16,0,e)}),null)}var U=i.ub("app-catalogue",k,(function(n){return i.Xb(0,[(n()(),i.yb(0,0,null,null,2,"app-catalogue",[],null,null,null,S,w)),i.Pb(512,null,m.a,m.a,[g.c,x.b,v.a,y.a]),i.xb(2,49152,null,0,k,[s.Eb,m.a,s.Gb,f.a,s.Cb,s.Lb,R.a,s.a],null,null)],null,null)}),{},{},[]),q=u("iInd"),_=u("lZ6u"),Y=u("Tx//"),V=i.vb(o,[],(function(n){return i.Jb([i.Kb(512,i.j,i.ab,[[8,[r.a,U]],[3,i.j],i.z]),i.Kb(4608,a.o,a.n,[i.w]),i.Kb(4608,s.c,s.c,[i.B,i.g]),i.Kb(4608,s.Db,s.Db,[s.c,i.j,i.t]),i.Kb(4608,s.Hb,s.Hb,[s.c,i.j,i.t]),i.Kb(4608,d.r,d.r,[]),i.Kb(1073742336,a.c,a.c,[]),i.Kb(1073742336,s.Ab,s.Ab,[]),i.Kb(1073742336,d.q,d.q,[]),i.Kb(1073742336,d.g,d.g,[]),i.Kb(1073742336,q.n,q.n,[[2,q.s],[2,q.m]]),i.Kb(1073742336,_.a,_.a,[]),i.Kb(1073742336,Y.a,Y.a,[]),i.Kb(1073742336,o,o,[]),i.Kb(1024,q.k,(function(){return[[{path:"",component:k}]]}),[])])}))}}])}();
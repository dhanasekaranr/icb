(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{L6id:function(n,l,t){"use strict";t.r(l),t.d(l,"HomePageModuleNgFactory",(function(){return P}));var e=t("8Y7J");class i{}var o=t("pMnS"),u=t("MKJQ"),a=t("sZkV"),r=t("SVse"),s=t("mrSG"),c=t("MO+k"),h=t("PK6w"),b=t("gnjc"),g=t("WU+Y");class d{constructor(n,l,t,e,i,o){this.navCtrl=n,this.authentication=l,this.service=t,this.popoverCtrl=e,this.ms=i,this.loading=o,this.completedMonth=[],this.rentalMonth=[],this.Months=[],this.AvailableCount=0,this.WishesCount=0,this.NotificationCount=0,this.TransactionsCount=0,this.holdsCount=0}ionViewWillEnter(){return Object(s.a)(this,void 0,void 0,(function*(){null!=this.authentication.getAccessToken()?(this.RentedOut=0,this.loader=yield this.loading.create({message:"loading dashboard..."}),this.loader.present().then(()=>{this.drawLineChart(),this.getRentalStatus(),this.getBookCounts(),this.getActiveWishList(),this.getNotificationList(),this.getRentalTransactions(),this.getReceiving()})):this.navCtrl.navigateForward("tabs/login")}))}settingsPopover(n){return Object(s.a)(this,void 0,void 0,(function*(){const l=yield this.popoverCtrl.create({component:g.a,event:n,translucent:!0});return yield l.present()}))}presentPopover(n){return Object(s.a)(this,void 0,void 0,(function*(){const l=yield this.popoverCtrl.create({component:b.a,componentProps:{data:this.wishes},event:n,translucent:!0});return yield l.present()}))}notificationPopover(n){return Object(s.a)(this,void 0,void 0,(function*(){const n=yield this.popoverCtrl.create({component:h.a,componentProps:{data:this.notification}});n.present(),n.onDidDismiss()}))}bookInfo(n){this.ms.setDestn(n),this.navCtrl.navigateForward("/tabs/bookInfo")}showRentals(n){this.ms.setDestn(n),this.navCtrl.navigateForward("/tabs/rentalsPage")}showReceiving(n){this.ms.setDestn(n),this.navCtrl.navigateForward("/tabs/receivingPage")}showStats(){this.navCtrl.navigateForward("/tabs/statsPage")}showHistory(n){this.ms.setDestn(n),this.navCtrl.navigateForward("/tabs/historyPage")}getNotificationList(){this.service.getNotificationList().then(n=>{this.notification=n,this.NotificationCount=this.notification.length})}getRentalTransactions(){this.service.getRentalTransactions().then(n=>{this.Transactions=n,this.TransactionsCount=this.Transactions.length,this.loader.dismiss()})}getReceiving(){this.service.getReceiving().then(n=>{this.holds=n,this.holdsCount=this.holds.length,this.loader.dismiss()})}getActiveWishList(){this.service.getActiveWishList().then(n=>{this.wishes=n,this.WishesCount=this.wishes.length})}getBookCounts(){this.service.searchTrans("book","").then(n=>{this.books=n,this.RentedOut=this.books.reduce((n,l)=>n+parseInt(l.RentedCopies,10),0),this.AvailableCount=this.books.reduce((n,l)=>n+parseInt(l.TotalCopies,10),0)}).catch(n=>{console.log(n)})}getRentalStatus(){this.service.getRentalStatus("monthly","0").then(n=>{this.booksStat=n,this.completedMonth.length=0,this.rentalMonth.length=0,this.Months.length=0,this.booksStat.forEach(n=>{17===n.Stat?this.completedMonth.push(n.Borrower):(this.rentalMonth.push(n.Borrower),this.Months.push(n.RentalMonth))}),this.lineChart.update()}).catch(n=>{console.log(n)})}drawLineChart(){this.lineChart=new c.Chart(this.lineCanvas.nativeElement,{type:"line",data:{labels:this.Months,datasets:[{label:"Completed",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:1,pointRadius:1,pointHitRadius:1,data:this.completedMonth,spanGaps:!0},{label:"In Rental",fill:!1,lineTension:.1,backgroundColor:"rgba(192,77,192,0.4)",borderColor:"rgba(192,77,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(192,77,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(192,77,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:1,pointRadius:1,pointHitRadius:1,data:this.rentalMonth,spanGaps:!0}]}})}logOut(){this.authentication.logout(),this.navCtrl.navigateForward("/tabs/login")}}var p=t("occH"),f=t("ngBU"),x=t("dqLM"),m=e.wb({encapsulation:0,styles:[['.welcome-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:35vh;overflow:hidden}#notification-button[_ngcontent-%COMP%]{position:relative;top:0;right:-5px;left:-3px;font-size:1.2em}#notifications-badge-large[_ngcontent-%COMP%]{right:0}#notifications-badge[_ngcontent-%COMP%], #notifications-badge-large[_ngcontent-%COMP%]{position:absolute;top:0;border-radius:100%;color:#fff;background-color:red}#notifications-badge[_ngcontent-%COMP%]{right:-5px;font-weight:100;font-size:.5em}ion-card[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:3em}page-home[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{text-align:center}page-home[_ngcontent-%COMP%]   .ionic-logo[_ngcontent-%COMP%]{display:inline-flex;position:relative;width:87px;height:87px;border:3.5px solid #5e86c4;border-radius:100%;-moz-border-radius:100%;-webkit-border-radius:100%;-moz-animation:spin 2s infinite linear;-webkit-animation:spin 2s linear infinite}page-home[_ngcontent-%COMP%]   .ionic-logo[_ngcontent-%COMP%]:after{width:38px;height:38px;top:50%;margin-left:-19px;margin-top:-19px}page-home[_ngcontent-%COMP%]   .ionic-logo[_ngcontent-%COMP%]:after, page-home[_ngcontent-%COMP%]   .ionic-logo[_ngcontent-%COMP%]:before{content:"";position:absolute;background:#5e86c4;left:50%;border-radius:100%;-moz-border-radius:100%;-webkit-border-radius:100%}page-home[_ngcontent-%COMP%]   .ionic-logo[_ngcontent-%COMP%]:before{width:14px;height:14px;top:-8px;margin-left:-7px}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}.icon-circle[_ngcontent-%COMP%], .icon-circle-large[_ngcontent-%COMP%], .icon-circle-small[_ngcontent-%COMP%]{position:relative;display:inline-block;margin:-1px;width:45px;height:45px;font-size:40px;border-radius:50%;border:1px solid #ebebeb;background:#00a1e1;color:#fff;text-align:center}@media only screen and (min-device-width:320px){.icon-circle-large[_ngcontent-%COMP%]{width:80px;height:80px;font-size:48px;padding:16px}#notifications-badge-large[_ngcontent-%COMP%]{text-align:center}}@media only screen and (min-device-width:375px){.icon-circle-large[_ngcontent-%COMP%]{width:100px;height:100px;font-size:64px;padding:16px}#notifications-badge-large[_ngcontent-%COMP%]{text-align:center;width:4ex}}@media only screen and (min-device-width:414px){.icon-circle-large[_ngcontent-%COMP%]{width:120px;height:120px;font-size:72px;padding:16px}#notifications-badge-large[_ngcontent-%COMP%]{text-align:center;width:4ex;right:0}}@media only screen and (min-device-width:768px){.icon-circle-large[_ngcontent-%COMP%]{width:160px;height:160px;font-size:120px;padding:16px}#notifications-badge-large[_ngcontent-%COMP%]{text-align:center;width:6ex;height:4ex;right:0;padding-top:5px}}.icon-circle-small[_ngcontent-%COMP%]{width:24px;height:24px;font-size:20px}.icon-circle-outline[_ngcontent-%COMP%]{border:1px solid #00a1e1;background:transparent;color:#00a1e1}.item-icon-circle[_ngcontent-%COMP%]{border-radius:50%;width:100px;height:100px;text-align:center;color:#fff}.item-icon-circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:60px}.bg-circle-alt[_ngcontent-%COMP%]{border-radius:50%;width:100px;height:100px}']],data:{}});function v(n){return e.Xb(0,[(n()(),e.yb(0,0,null,null,1,"p",[["style","text-align: center;"]],null,null,null,null,null)),(n()(),e.Ub(-1,null,["Receiving"]))],null,null)}function C(n){return e.Xb(0,[(n()(),e.yb(0,0,null,null,1,"p",[["style","text-align: center;"]],null,null,null,null,null)),(n()(),e.Ub(-1,null,["Hold"]))],null,null)}function y(n){return e.Xb(0,[(n()(),e.yb(0,0,null,null,13,"ion-item",[],null,null,null,u.Z,u.p)),e.xb(1,49152,null,0,a.G,[e.h,e.l,e.B],null,null),(n()(),e.yb(2,0,null,0,2,"ion-avatar",[["slot","start"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.bookInfo(n.context.$implicit)&&e),e}),u.J,u.b)),e.xb(3,49152,null,0,a.f,[e.h,e.l,e.B],null,null),(n()(),e.yb(4,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),e.yb(5,0,null,0,8,"ion-label",[],null,null,null,u.ab,u.s)),e.xb(6,49152,null,0,a.M,[e.h,e.l,e.B],null,null),(n()(),e.yb(7,0,null,0,4,"h3",[],null,null,null,null,null)),(n()(),e.Ub(8,null,[""," "," "])),e.Ob(9,2),(n()(),e.yb(10,0,null,null,1,"button",[["style","background-color: transparent"]],null,null,null,null,null)),(n()(),e.Ub(-1,null,["..... "])),(n()(),e.yb(12,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),e.Ub(13,null,["",""]))],null,(function(n,l){n(l,4,0,e.Fb(1,"",l.context.$implicit.PictureLink,""));var t=l.context.$implicit.BorrowerName,i=e.Vb(l,8,1,n(l,9,0,e.Mb(l.parent,0),l.context.$implicit.RentedDate,"MM/dd/yyyy"));n(l,8,0,t,i),n(l,13,0,l.context.$implicit.Description)}))}function w(n){return e.Xb(0,[e.Nb(0,r.e,[e.w]),e.Qb(671088640,1,{lineCanvas:0}),(n()(),e.yb(2,0,null,null,25,"ion-header",[],null,null,null,u.U,u.m)),e.xb(3,49152,null,0,a.A,[e.h,e.l,e.B],null,null),(n()(),e.yb(4,0,null,0,23,"ion-toolbar",[["color","header"]],null,null,null,u.pb,u.H)),e.xb(5,49152,null,0,a.yb,[e.h,e.l,e.B],{color:[0,"color"]},null),(n()(),e.yb(6,0,null,0,5,"ion-buttons",[["slot","start"]],null,null,null,u.M,u.e)),e.xb(7,49152,null,0,a.k,[e.h,e.l,e.B],null,null),(n()(),e.yb(8,0,null,0,3,"ion-button",[["fill","clear"],["id","notification-button"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.settingsPopover(t)&&e),e}),u.L,u.d)),e.xb(9,49152,null,0,a.j,[e.h,e.l,e.B],{fill:[0,"fill"]},null),(n()(),e.yb(10,0,null,0,1,"ion-icon",[["name","settings"]],null,null,null,u.V,u.n)),e.xb(11,49152,null,0,a.B,[e.h,e.l,e.B],{name:[0,"name"]},null),(n()(),e.yb(12,0,null,0,2,"ion-title",[["class","ion-text-center"]],null,null,null,u.ob,u.G)),e.xb(13,49152,null,0,a.wb,[e.h,e.l,e.B],null,null),(n()(),e.Ub(-1,0,["Home"])),(n()(),e.yb(15,0,null,0,12,"ion-buttons",[["slot","end"]],null,null,null,u.M,u.e)),e.xb(16,49152,null,0,a.k,[e.h,e.l,e.B],null,null),(n()(),e.yb(17,0,null,0,6,"ion-button",[["fill","clear"],["id","notification-button"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.notificationPopover(t)&&e),e}),u.L,u.d)),e.xb(18,49152,null,0,a.j,[e.h,e.l,e.B],{fill:[0,"fill"]},null),(n()(),e.yb(19,0,null,0,1,"ion-icon",[["name","notifications"]],null,null,null,u.V,u.n)),e.xb(20,49152,null,0,a.B,[e.h,e.l,e.B],{name:[0,"name"]},null),(n()(),e.yb(21,0,null,0,2,"ion-badge",[["id","notifications-badge"]],null,null,null,u.K,u.c)),e.xb(22,49152,null,0,a.i,[e.h,e.l,e.B],null,null),(n()(),e.Ub(23,0,["",""])),(n()(),e.yb(24,0,null,0,3,"ion-button",[["slot","end"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.logOut()&&e),e}),u.L,u.d)),e.xb(25,49152,null,0,a.j,[e.h,e.l,e.B],null,null),(n()(),e.yb(26,0,null,0,1,"ion-icon",[["name","log-out"],["slot","icon-only"]],null,null,null,u.V,u.n)),e.xb(27,49152,null,0,a.B,[e.h,e.l,e.B],{name:[0,"name"]},null),(n()(),e.yb(28,0,null,null,50,"ion-content",[],null,null,null,u.R,u.j)),e.xb(29,49152,null,0,a.t,[e.h,e.l,e.B],null,null),(n()(),e.yb(30,0,null,0,7,"ion-card",[],null,null,null,u.P,u.f)),e.xb(31,49152,null,0,a.l,[e.h,e.l,e.B],null,null),(n()(),e.yb(32,0,null,0,2,"ion-card-header",[],null,null,null,u.O,u.h)),e.xb(33,49152,null,0,a.n,[e.h,e.l,e.B],null,null),(n()(),e.Ub(-1,0,[" Books "])),(n()(),e.yb(35,0,null,0,2,"ion-card-content",[],null,null,null,u.N,u.g)),e.xb(36,49152,null,0,a.m,[e.h,e.l,e.B],null,null),(n()(),e.yb(37,0,[[1,0],["lineCanvas",1]],0,0,"canvas",[],null,null,null,null,null)),(n()(),e.yb(38,0,null,0,33,"div",[],null,null,null,null,null)),(n()(),e.yb(39,0,null,null,32,"ion-grid",[],null,null,null,u.T,u.l)),e.xb(40,49152,null,0,a.z,[e.h,e.l,e.B],null,null),(n()(),e.yb(41,0,null,0,30,"ion-row",[],null,null,null,u.hb,u.z)),e.xb(42,49152,null,0,a.fb,[e.h,e.l,e.B],null,null),(n()(),e.yb(43,0,null,0,12,"ion-col",[["class","ion-align-self-start"]],null,null,null,u.Q,u.i)),e.xb(44,49152,null,0,a.s,[e.h,e.l,e.B],null,null),(n()(),e.yb(45,0,null,0,6,"p",[["style","text-align: center"]],null,null,null,null,null)),(n()(),e.yb(46,0,null,null,5,"a",[["class","icon-circle-large"],["style","background-color:#117A65"]],null,[[null,"click"]],(function(n,l,t){var e=!0,i=n.component;return"click"===l&&(e=!1!==(i.holdsCount>0&&i.showReceiving(i.holds))&&e),e}),null,null)),(n()(),e.yb(47,0,null,null,2,"ion-badge",[["id","notifications-badge-large"]],null,null,null,u.K,u.c)),e.xb(48,49152,null,0,a.i,[e.h,e.l,e.B],null,null),(n()(),e.Ub(49,0,["9",""])),(n()(),e.yb(50,0,null,null,1,"ion-icon",[["name","archive"]],null,null,null,u.V,u.n)),e.xb(51,49152,null,0,a.B,[e.h,e.l,e.B],{name:[0,"name"]},null),(n()(),e.hb(16777216,null,0,1,null,v)),e.xb(53,16384,null,0,r.m,[e.R,e.O],{ngIf:[0,"ngIf"]},null),(n()(),e.hb(16777216,null,0,1,null,C)),e.xb(55,16384,null,0,r.m,[e.R,e.O],{ngIf:[0,"ngIf"]},null),(n()(),e.yb(56,0,null,0,7,"ion-col",[["class","ion-align-self-center"]],null,null,null,u.Q,u.i)),e.xb(57,49152,null,0,a.s,[e.h,e.l,e.B],null,null),(n()(),e.yb(58,0,null,0,3,"p",[["style","text-align: center"]],null,null,null,null,null)),(n()(),e.yb(59,0,null,null,2,"a",[["class","icon-circle-large"],["style","background-color:#3FBFF4;"]],null,[[null,"click"]],(function(n,l,t){var e=!0,i=n.component;return"click"===l&&(e=!1!==i.showHistory(i.booksStat)&&e),e}),null,null)),(n()(),e.yb(60,0,null,null,1,"ion-icon",[["name","pulse"]],null,null,null,u.V,u.n)),e.xb(61,49152,null,0,a.B,[e.h,e.l,e.B],{name:[0,"name"]},null),(n()(),e.yb(62,0,null,0,1,"p",[["style","text-align: center;"]],null,null,null,null,null)),(n()(),e.Ub(-1,null,["Statistics"])),(n()(),e.yb(64,0,null,0,7,"ion-col",[["class","ion-align-self-end"]],null,null,null,u.Q,u.i)),e.xb(65,49152,null,0,a.s,[e.h,e.l,e.B],null,null),(n()(),e.yb(66,0,null,0,3,"p",[["style","text-align: center"]],null,null,null,null,null)),(n()(),e.yb(67,0,null,null,2,"a",[["class","icon-circle-large"],["style","background-color:#feb236 "]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.showStats()&&e),e}),null,null)),(n()(),e.yb(68,0,null,null,1,"ion-icon",[["name","logo-twitter"]],null,null,null,u.V,u.n)),e.xb(69,49152,null,0,a.B,[e.h,e.l,e.B],{name:[0,"name"]},null),(n()(),e.yb(70,0,null,0,1,"p",[["style","text-align: center;"]],null,null,null,null,null)),(n()(),e.Ub(-1,null,["News"])),(n()(),e.yb(72,0,null,0,6,"ion-list",[],null,null,null,u.cb,u.t)),e.xb(73,49152,null,0,a.N,[e.h,e.l,e.B],null,null),(n()(),e.yb(74,0,null,0,2,"ion-list-header",[],null,null,null,u.bb,u.u)),e.xb(75,49152,null,0,a.O,[e.h,e.l,e.B],null,null),(n()(),e.Ub(-1,0,[" Current Rental List "])),(n()(),e.hb(16777216,null,0,1,null,y)),e.xb(78,278528,null,0,r.l,[e.R,e.O,e.u],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){var t=l.component;n(l,5,0,"header"),n(l,9,0,"clear"),n(l,11,0,"settings"),n(l,18,0,"clear"),n(l,20,0,"notifications"),n(l,27,0,"log-out"),n(l,51,0,"archive"),n(l,53,0,"Y"===t.authentication.getIsAdmin()),n(l,55,0,"Y"!=t.authentication.getIsAdmin()),n(l,61,0,"pulse"),n(l,69,0,"logo-twitter"),n(l,78,0,t.Transactions)}),(function(n,l){var t=l.component;n(l,23,0,t.NotificationCount),n(l,49,0,t.holdsCount)}))}function M(n){return e.Xb(0,[(n()(),e.yb(0,0,null,null,1,"app-home",[],null,null,null,w,m)),e.xb(1,49152,null,0,d,[a.Eb,p.a,f.a,a.Hb,x.a,a.Cb],null,null)],null,null)}var k=e.ub("app-home",d,M,{},{},[]),B=t("s7LF"),O=t("iInd"),P=e.vb(i,[],(function(n){return e.Jb([e.Kb(512,e.j,e.ab,[[8,[o.a,k]],[3,e.j],e.z]),e.Kb(4608,r.o,r.n,[e.w]),e.Kb(4608,a.c,a.c,[e.B,e.g]),e.Kb(4608,a.Db,a.Db,[a.c,e.j,e.t]),e.Kb(4608,a.Hb,a.Hb,[a.c,e.j,e.t]),e.Kb(4608,B.r,B.r,[]),e.Kb(1073742336,r.c,r.c,[]),e.Kb(1073742336,a.Ab,a.Ab,[]),e.Kb(1073742336,B.q,B.q,[]),e.Kb(1073742336,B.g,B.g,[]),e.Kb(1073742336,O.n,O.n,[[2,O.s],[2,O.m]]),e.Kb(1073742336,i,i,[]),e.Kb(1024,O.k,(function(){return[[{path:"",component:d}]]}),[])])}))}}]);
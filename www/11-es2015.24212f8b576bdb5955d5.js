(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{px7n:function(l,n,t){"use strict";t.r(n),t.d(n,"CataloguePageModuleNgFactory",(function(){return Y}));var e=t("8Y7J");class u{}var i=t("pMnS"),o=t("SVse"),a=t("MKJQ"),c=t("sZkV"),r=t("Uynf"),s=t("2GTJ"),b=t("3X0i"),p=t("occH"),h=t("s7LF"),d=t("ngBU"),m=t("IheW"),g=t("xgBC"),f=t("pjJ7"),x=t("BimW"),v=t("mrSG");class C{constructor(l,n,t,e,u,i,o,a){this.navCtrl=l,this.service=n,this.platform=t,this.authentication=e,this.loading=u,this.toastCtrl=i,this.ms=o,this.actionSheetCtrl=a,this.queryval="",this.DescriptionSearch=""}ionViewWillEnter(){return Object(v.a)(this,void 0,void 0,(function*(){null!=this.authentication.getAccessToken()?(this.loader=yield this.loading.create({message:"Getting books..."}),this.searchBookDB(null),this.service.getRelationShips().then(l=>Object(v.a)(this,void 0,void 0,(function*(){this.userlist=l})))):this.navCtrl.navigateForward("tabs/login")}))}searchBookDB(l){l&&void 0!==l.target.value&&(this.queryval=l.target.value),(this.queryval.length>1||""===this.queryval)&&this.loader.present().then(()=>{this.service.searchTrans("book",this.queryval).then(l=>{this.books=l,this.RentedOut=this.books.reduce((l,n)=>l+parseInt(n.RentedCopies,10),0),this.AvailableCount=this.books.reduce((l,n)=>l+parseInt(n.TotalCopies,10),0),this.loader.dismiss()}).catch(l=>{console.log(l)})})}getIdCheval(){this.AvailableCount=this.books.reduce((l,n)=>l+parseInt(n.Course.allocation,10),0)}FilterBookDB(l){this.DescriptionSearch=l.target.value}bookInfo(l){this.ms.setDestn(l),this.navCtrl.navigateForward("tabs/bookInfo")}AddToWishList(l,n,t){this.service.AddToWishList(l.ISBN).then(e=>Object(v.a)(this,void 0,void 0,(function*(){(yield this.toastCtrl.create({message:t,duration:1e3})).present(),l.WishList=n})))}AddToHold(l){return Object(v.a)(this,void 0,void 0,(function*(){let n;const t=[];this.userlist.forEach(e=>Object(v.a)(this,void 0,void 0,(function*(){t.push({text:e.FirstName+" "+e.LastName,handler:()=>(this.service.AddToHold(l.ISBN,l.ProposedCode,e.UserId,l.CreatedBy).then(n=>Object(v.a)(this,void 0,void 0,(function*(){(yield this.toastCtrl.create({message:"Placed hold request",duration:1e3})).present(),n&&(l.Hold="Y")}))),n.dismiss(),!1)})}))),t.push({text:"Cancel",icon:"close",role:"destructive",handler:()=>(n.dismiss(),!1)}),n=yield this.actionSheetCtrl.create({header:"Pick a Name ",buttons:t}),n.present()}))}returnBook(l){l.TotalCopies>1?(this.ms.setDestn(l),this.navCtrl.navigateForward("tabs/multipleReturnPage")):this.service.markReturn(l.RentedTransId).then(l=>Object(v.a)(this,void 0,void 0,(function*(){(yield this.toastCtrl.create({message:"Returned successfully !",duration:2e3})).present(),this.searchBookDB(null)})))}checkout(l){this.ms.setDestn(l),this.ms.setAction("Out"),l.TotalCopies>1?this.navCtrl.navigateForward("tabs/multiCopiesPage"):(this.ms.setHome("C"),this.navCtrl.navigateForward("tabs/checkoutPage"))}openMenu(l,n){this.service.getBookProfile(n.ISBN).then(l=>Object(v.a)(this,void 0,void 0,(function*(){this.Available=l,this.RentedOut=this.Available.filter(l=>"3"===l.Status).length,this.AvailableCount=this.Available.filter(l=>"3"!==l.Status).length,(yield this.actionSheetCtrl.create({header:"Click the link below.",cssClass:"action-sheets-basic-page",buttons:[{text:"Book Info [Count: "+this.Available.length+"]",role:"destructive",icon:this.platform.is("ios")?null:"list",handler:()=>{this.navCtrl.navigateForward("CheckOutPage",{queryParams:{book:n}})}},{text:"Cancel",role:"cancel",icon:this.platform.is("ios")?null:"close",handler:()=>{}}]})).present()})))}itemTapped(l,n){this.navCtrl.navigateForward("BookInfo",{queryParams:{book:n}})}}var y=t("dqLM"),k=e.wb({encapsulation:0,styles:[[".icon-circle[_ngcontent-%COMP%], .icon-circle-large[_ngcontent-%COMP%], .icon-circle-small[_ngcontent-%COMP%]{position:relative;display:inline-block;margin:-1px;width:45px;height:45px;font-size:40px;border-radius:10%;text-align:center}.icon-circle-large[_ngcontent-%COMP%]{width:100px;height:100px;font-size:64px;padding:16px}.icon-circle-small[_ngcontent-%COMP%]{width:24px;height:24px;font-size:20px}.icon-circle-outline[_ngcontent-%COMP%]{border:1px solid #00a1e1;background:transparent;color:#00a1e1}.item-icon-circle[_ngcontent-%COMP%]{border-radius:50%;width:100px;height:100px;text-align:center;color:#fff}.item-icon-circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:60px}.bg-circle-alt[_ngcontent-%COMP%]{border-radius:50%;width:100px;height:100px}"]],data:{}});function B(l){return e.Xb(0,[(l()(),e.yb(0,0,null,null,1,"span",[["style","color: green; font-size: .8em;align-content: right"]],null,null,null,null,null)),(l()(),e.Ub(1,null,[" Total Books:","(","); Rented Out:",""]))],null,(function(l,n){var t=n.component;l(n,1,0,t.AvailableCount,t.books.length,t.RentedOut)}))}function I(l){return e.Xb(0,[(l()(),e.yb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Ub(1,null,["[Checked Out : ","]"]))],null,(function(l,n){l(n,1,0,n.parent.parent.context.$implicit.RentedCopies)}))}function O(l){return e.Xb(0,[(l()(),e.yb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Ub(1,null,["[On Hold : ","]"]))],null,(function(l,n){l(n,1,0,n.parent.parent.context.$implicit.HoldedCopies)}))}function R(l){return e.Xb(0,[(l()(),e.yb(0,0,null,null,5,"p",[["class","item-description"]],null,null,null,null,null)),(l()(),e.Ub(1,null,[" Available : "," "])),(l()(),e.hb(16777216,null,null,1,null,I)),e.xb(3,16384,null,0,o.m,[e.R,e.O],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,O)),e.xb(5,16384,null,0,o.m,[e.R,e.O],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,3,0,n.parent.context.$implicit.RentedCopies>0),l(n,5,0,n.parent.context.$implicit.HoldedCopies>0)}),(function(l,n){l(n,1,0,n.parent.context.$implicit.TotalCopies-n.parent.context.$implicit.RentedCopies-n.parent.context.$implicit.HoldedCopies)}))}function w(l){return e.Xb(0,[(l()(),e.yb(0,0,null,null,1,"p",[["style","color:green;"]],null,null,null,null,null)),(l()(),e.Ub(1,null,[""," "]))],null,(function(l,n){l(n,1,0,n.parent.context.$implicit.Code)}))}function $(l){return e.Xb(0,[(l()(),e.yb(0,0,null,null,5,"span",[["class","ion-text-wrap"],["style","text-align:center;"]],null,null,null,null,null)),(l()(),e.yb(1,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),e.yb(2,0,null,null,1,"ion-icon",[["class","icon-circle"],["name","archive-outline"],["style","color:blue;"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.AddToHold(l.parent.parent.context.$implicit)&&e),e}),a.V,a.n)),e.xb(3,49152,null,0,c.B,[e.h,e.l,e.B],{name:[0,"name"]},null),(l()(),e.yb(4,0,null,null,1,"p",[["style","margin-top: 0px;color:blue;"]],null,null,null,null,null)),(l()(),e.Ub(-1,null,["Request Hold"]))],(function(l,n){l(n,3,0,"archive-outline")}),null)}function P(l){return e.Xb(0,[(l()(),e.yb(0,0,null,null,5,"span",[["class","ion-text-wrap"]],null,null,null,null,null)),(l()(),e.yb(1,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),e.yb(2,0,null,null,1,"ion-icon",[["class","icon-circle"],["name","refresh-circle-outline"],["style","color:green;"]],null,null,null,a.V,a.n)),e.xb(3,49152,null,0,c.B,[e.h,e.l,e.B],{name:[0,"name"]},null),(l()(),e.yb(4,0,null,null,1,"p",[["style","color:green;margin-top: 0px;"]],null,null,null,null,null)),(l()(),e.Ub(-1,null,["On Hold"]))],(function(l,n){l(n,3,0,"refresh-circle-outline")}),null)}function A(l){return e.Xb(0,[(l()(),e.yb(0,0,null,null,5,"span",[["class","ion-text-wrap"]],null,null,null,null,null)),(l()(),e.yb(1,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),e.yb(2,0,null,null,1,"ion-icon",[["class","icon-circle"],["name","thumbs-up-outline"],["style","color:green;"]],null,null,null,a.V,a.n)),e.xb(3,49152,null,0,c.B,[e.h,e.l,e.B],{name:[0,"name"]},null),(l()(),e.yb(4,0,null,null,1,"p",[["style","color:green;margin-top: 0px;"]],null,null,null,null,null)),(l()(),e.Ub(-1,null,["Ready for pickup"]))],(function(l,n){l(n,3,0,"thumbs-up-outline")}),null)}function H(l){return e.Xb(0,[(l()(),e.yb(0,0,null,null,5,"span",[["class","ion-text-wrap"]],null,null,null,null,null)),(l()(),e.yb(1,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),e.yb(2,0,null,null,1,"ion-icon",[["class","icon-circle"],["name","thumbs-down-outline"],["style","color:red;"]],null,null,null,a.V,a.n)),e.xb(3,49152,null,0,c.B,[e.h,e.l,e.B],{name:[0,"name"]},null),(l()(),e.yb(4,0,null,null,1,"p",[["style","color:red;margin-top: 0px;"]],null,null,null,null,null)),(l()(),e.Ub(-1,null,["Denied"]))],(function(l,n){l(n,3,0,"thumbs-down-outline")}),null)}function T(l){return e.Xb(0,[(l()(),e.yb(0,0,null,null,8,"span",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,$)),e.xb(2,16384,null,0,o.m,[e.R,e.O],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,P)),e.xb(4,16384,null,0,o.m,[e.R,e.O],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,A)),e.xb(6,16384,null,0,o.m,[e.R,e.O],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,H)),e.xb(8,16384,null,0,o.m,[e.R,e.O],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,n.parent.context.$implicit.TotalCopies-n.parent.context.$implicit.RentedCopies-n.parent.context.$implicit.HoldedCopies>0&&"Y"!=n.parent.context.$implicit.Hold&&"Y"!=n.parent.context.$implicit.HoldReady&&"Y"!=n.parent.context.$implicit.HoldRejected),l(n,4,0,"Y"===n.parent.context.$implicit.Hold),l(n,6,0,"Y"===n.parent.context.$implicit.HoldReady),l(n,8,0,"Y"===n.parent.context.$implicit.HoldRejected)}),null)}function K(l){return e.Xb(0,[(l()(),e.yb(0,0,null,null,3,"button",[["color","danger"],["ion-button",""],["style","background-color: red;color:white"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.returnBook(l.parent.parent.context.$implicit)&&e),e}),null,null)),(l()(),e.yb(1,0,null,null,1,"ion-icon",[["name","refresh"]],null,null,null,a.V,a.n)),e.xb(2,49152,null,0,c.B,[e.h,e.l,e.B],{name:[0,"name"]},null),(l()(),e.Ub(3,null,[" Return (",") "]))],(function(l,n){l(n,2,0,"refresh")}),(function(l,n){l(n,3,0,n.parent.parent.context.$implicit.RentedCopies)}))}function M(l){return e.Xb(0,[(l()(),e.yb(0,0,null,null,3,"button",[["color","primary"],["ion-button",""],["style","background-color: green; color:white"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.checkout(l.parent.parent.context.$implicit)&&e),e}),null,null)),(l()(),e.yb(1,0,null,null,1,"ion-icon",[["name","cart"]],null,null,null,a.V,a.n)),e.xb(2,49152,null,0,c.B,[e.h,e.l,e.B],{name:[0,"name"]},null),(l()(),e.Ub(3,null,[" Check out (",") "]))],(function(l,n){l(n,2,0,"cart")}),(function(l,n){l(n,3,0,n.parent.parent.context.$implicit.TotalCopies-n.parent.parent.context.$implicit.RentedCopies)}))}function X(l){return e.Xb(0,[(l()(),e.yb(0,0,null,null,5,"ion-item-options",[["side","end"]],null,null,null,a.X,a.q)),e.xb(1,49152,null,0,c.K,[e.h,e.l,e.B],{side:[0,"side"]},null),(l()(),e.hb(16777216,null,0,1,null,K)),e.xb(3,16384,null,0,o.m,[e.R,e.O],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,0,1,null,M)),e.xb(5,16384,null,0,o.m,[e.R,e.O],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,"end"),l(n,3,0,n.parent.context.$implicit.RentedCopies>0),l(n,5,0,n.parent.context.$implicit.TotalCopies-n.parent.context.$implicit.RentedCopies>0)}),null)}function j(l){return e.Xb(0,[(l()(),e.yb(0,0,null,null,18,"ion-item-sliding",[],null,null,null,a.Y,a.r)),e.xb(1,49152,null,0,c.L,[e.h,e.l,e.B],null,null),(l()(),e.yb(2,0,null,0,14,"ion-item",[],null,null,null,a.Z,a.p)),e.xb(3,49152,null,0,c.G,[e.h,e.l,e.B],null,null),(l()(),e.yb(4,0,null,0,2,"ion-avatar",[["slot","start"],["thumbnail",""]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.bookInfo(l.context.$implicit)&&e),e}),a.J,a.b)),e.xb(5,49152,null,0,c.f,[e.h,e.l,e.B],null,null),(l()(),e.yb(6,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(l()(),e.yb(7,0,null,0,7,"ion-label",[["class","ion-text-wrap"]],null,null,null,a.ab,a.s)),e.xb(8,49152,null,0,c.M,[e.h,e.l,e.B],null,null),(l()(),e.yb(9,0,null,0,1,"h2",[],null,null,null,null,null)),(l()(),e.Ub(10,null,["",""])),(l()(),e.hb(16777216,null,0,1,null,R)),e.xb(12,16384,null,0,o.m,[e.R,e.O],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,0,1,null,w)),e.xb(14,16384,null,0,o.m,[e.R,e.O],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,0,1,null,T)),e.xb(16,16384,null,0,o.m,[e.R,e.O],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,0,1,null,X)),e.xb(18,16384,null,0,o.m,[e.R,e.O],{ngIf:[0,"ngIf"]},null)],(function(l,n){var t=n.component;l(n,12,0,n.context.$implicit.TotalCopies>0),l(n,14,0,1==n.context.$implicit.TotalCopies),l(n,16,0,"Y"!=t.authentication.getIsAdmin()),l(n,18,0,"Y"===t.authentication.getIsAdmin())}),(function(l,n){l(n,6,0,e.Fb(1,"",n.context.$implicit.PictureLink,"")),l(n,10,0,n.context.$implicit.Description)}))}function D(l){return e.Xb(0,[e.Nb(0,r.a,[]),(l()(),e.yb(1,0,null,null,1,"app-header",[],null,null,null,s.b,s.a)),e.xb(2,49152,null,0,b.a,[c.Eb,p.a,o.i],{title:[0,"title"]},null),(l()(),e.yb(3,0,null,null,14,"ion-content",[["class","home"],["padding",""]],null,null,null,a.R,a.j)),e.xb(4,49152,null,0,c.t,[e.h,e.l,e.B],null,null),(l()(),e.hb(16777216,null,0,1,null,B)),e.xb(6,16384,null,0,o.m,[e.R,e.O],{ngIf:[0,"ngIf"]},null),(l()(),e.yb(7,0,null,0,5,"ion-item",[],null,null,null,a.Z,a.p)),e.xb(8,49152,null,0,c.G,[e.h,e.l,e.B],null,null),(l()(),e.yb(9,0,null,0,3,"ion-searchbar",[],null,[[null,"ionInput"],[null,"ionCancel"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,t){var u=!0,i=l.component;return"ionBlur"===n&&(u=!1!==e.Mb(l,12)._handleBlurEvent(t.target)&&u),"ionChange"===n&&(u=!1!==e.Mb(l,12)._handleInputEvent(t.target)&&u),"ionInput"===n&&(u=!1!==i.FilterBookDB(t)&&u),"ionCancel"===n&&(u=!1!==i.searchBookDB(t)&&u),u}),a.ib,a.A)),e.Pb(5120,null,h.i,(function(l){return[l]}),[c.Kb]),e.xb(11,49152,null,0,c.gb,[e.h,e.l,e.B],{showCancelButton:[0,"showCancelButton"]},null),e.xb(12,4341760,null,0,c.Kb,[e.t,e.l],null,null),(l()(),e.yb(13,0,null,0,4,"ion-list",[],null,null,null,a.cb,a.t)),e.xb(14,49152,null,0,c.N,[e.h,e.l,e.B],null,null),(l()(),e.hb(16777216,null,0,2,null,j)),e.xb(16,278528,null,0,o.l,[e.R,e.O,e.u],{ngForOf:[0,"ngForOf"]},null),e.Ob(17,3)],(function(l,n){var t=n.component;l(n,2,0,"Catalogue"),l(n,6,0,t.AvailableCount),l(n,11,0,!0);var u=e.Vb(n,16,0,l(n,17,0,e.Mb(n,0),t.books,t.DescriptionSearch,null));l(n,16,0,u)}),null)}function F(l){return e.Xb(0,[(l()(),e.yb(0,0,null,null,2,"app-catalogue",[],null,null,null,D,k)),e.Pb(512,null,d.a,d.a,[m.c,g.b,f.a,x.a]),e.xb(2,49152,null,0,C,[c.Eb,d.a,c.Gb,p.a,c.Cb,c.Lb,y.a,c.a],null,null)],null,null)}var S=e.ub("app-catalogue",C,F,{},{},[]),U=t("iInd"),q=t("lZ6u"),_=t("Tx//"),Y=e.vb(u,[],(function(l){return e.Jb([e.Kb(512,e.j,e.ab,[[8,[i.a,S]],[3,e.j],e.z]),e.Kb(4608,o.o,o.n,[e.w]),e.Kb(4608,c.c,c.c,[e.B,e.g]),e.Kb(4608,c.Db,c.Db,[c.c,e.j,e.t]),e.Kb(4608,c.Hb,c.Hb,[c.c,e.j,e.t]),e.Kb(4608,h.r,h.r,[]),e.Kb(1073742336,o.c,o.c,[]),e.Kb(1073742336,c.Ab,c.Ab,[]),e.Kb(1073742336,h.q,h.q,[]),e.Kb(1073742336,h.g,h.g,[]),e.Kb(1073742336,U.n,U.n,[[2,U.s],[2,U.m]]),e.Kb(1073742336,q.a,q.a,[]),e.Kb(1073742336,_.a,_.a,[]),e.Kb(1073742336,u,u,[]),e.Kb(1024,U.k,(function(){return[[{path:"",component:C}]]}),[])])}))}}]);